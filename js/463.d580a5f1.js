"use strict";(self["webpackChunkfullstack_ecommerce_pojui"]=self["webpackChunkfullstack_ecommerce_pojui"]||[]).push([[463],{8323:function(e,t,a){a.r(t),a.d(t,{default:function(){return xa}});var l=a(641),o=a(2644),r=a(9322),s=a(5518),i=a(4272),n=a(2082),u=a(1332),d=a(8507),c=a(2877),m=a(1963),p=a(1470),f=a(5551),v=a(1766),g=a(9823),h=a(4759),b=a(7487),y=a(9841),k=a(1094),w=a(4717),F=a(2636),x=a(4675);const S=(0,k.j)({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>"boolean"===typeof e||[1e3,1024].includes(Number(e))},...(0,f.V)({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>(0,w.BN)(e).every((e=>null!=e&&"object"===typeof e))},...(0,p.tG)({clearable:!0})},"VFileInput"),_=(0,F.RW)()({name:"VFileInput",inheritAttrs:!1,props:S(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:a,emit:o,slots:r}=t;const{t:s}=(0,h.Ym)(),i=(0,b.q)(e,"modelValue",e.modelValue,(e=>(0,w.BN)(e)),(t=>e.multiple||Array.isArray(e.modelValue)?t:t[0]??null)),{isFocused:n,focus:u,blur:d}=(0,v.i)(e),k=(0,l.EW)((()=>"boolean"!==typeof e.showSize?e.showSize:void 0)),F=(0,l.EW)((()=>(i.value??[]).reduce(((e,t)=>{let{size:a=0}=t;return e+a}),0))),S=(0,l.EW)((()=>(0,w.hA)(F.value,k.value))),_=(0,l.EW)((()=>(i.value??[]).map((t=>{const{name:a="",size:l=0}=t;return e.showSize?`${a} (${(0,w.hA)(l,k.value)})`:a})))),P=(0,l.EW)((()=>{const t=i.value?.length??0;return e.showSize?s(e.counterSizeString,t,S.value):s(e.counterString,t)})),I=(0,y.KR)(),C=(0,y.KR)(),V=(0,y.KR)(),W=(0,l.EW)((()=>n.value||e.active)),E=(0,l.EW)((()=>["plain","underlined"].includes(e.variant)));function D(){V.value!==document.activeElement&&V.value?.focus(),n.value||u()}function $(e){V.value?.click()}function B(e){o("mousedown:control",e)}function L(e){V.value?.click(),o("click:control",e)}function A(t){t.stopPropagation(),D(),(0,l.dY)((()=>{i.value=[],(0,w.P)(e["onClick:clear"],t)}))}return(0,l.wB)(i,(e=>{const t=!Array.isArray(e)||!e.length;t&&V.value&&(V.value.value="")})),(0,x.C)((()=>{const t=!(!r.counter&&!e.counter),o=!(!t&&!r.details),[s,u]=(0,w.ph)(a),{modelValue:v,...g}=f.Z.filterProps(e),h=(0,p.jz)(e);return(0,l.bF)(f.Z,(0,l.v6)({ref:I,modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":E.value},e.class],style:e.style,"onClick:prepend":$},s,g,{centerAffix:!E.value,focused:n.value}),{...r,default:t=>{let{id:a,isDisabled:o,isDirty:s,isReadonly:m,isValid:f}=t;return(0,l.bF)(p.xR,(0,l.v6)({ref:C,"prepend-icon":e.prependIcon,onMousedown:B,onClick:L,"onClick:clear":A,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},h,{id:a.value,active:W.value||s.value,dirty:s.value||e.dirty,disabled:o.value,focused:n.value,error:!1===f.value}),{...r,default:t=>{let{props:{class:a,...s}}=t;return(0,l.bF)(l.FK,null,[(0,l.bF)("input",(0,l.v6)({ref:V,type:"file",readonly:m.value,disabled:o.value,multiple:e.multiple,name:e.name,onClick:e=>{e.stopPropagation(),m.value&&e.preventDefault(),D()},onChange:e=>{if(!e.target)return;const t=e.target;i.value=[...t.files??[]]},onFocus:D,onBlur:d},s,u),null),(0,l.bF)("div",{class:a},[!!i.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:_.value,totalBytes:F.value,totalBytesReadable:S.value}):e.chips?_.value.map((e=>(0,l.bF)(c.x,{key:e,size:"small",text:e},null))):_.value.join(", "))])])}})},details:o?a=>(0,l.bF)(l.FK,null,[r.details?.(a),t&&(0,l.bF)(l.FK,null,[(0,l.bF)("span",null,null),(0,l.bF)(m.p,{active:!!i.value?.length,value:P.value,disabled:e.disabled},r.counter)])]):void 0})})),(0,g.O)({},I,C,V)}});var P=a(7027),I=a(4492),C=a(4261),V=a(1743),W=(a(5792),a(4019));const E=(0,W.G)("v-spacer","div","VSpacer");var D=a(6861),$=a(8517),B=a(1686),L=a(4915),A=a(7683),T=a(6286),N=a(3091);const R=e=>((0,l.Qi)("data-v-3e7aebc7"),e=e(),(0,l.jt)(),e),O={class:"user-banner"},j={key:0,class:"text-center"},U={key:1,class:"text-center"},M={key:0,class:"container user-member-box mb-5"},z={class:"row"},q={class:"col-lg-6 col-md-12 mx-auto mt-3"},K={class:"d-flex align-center justify-space-between"},G=R((()=>(0,l.Lk)("span",null,"姓名",-1))),X={class:"counter ml-2"},H={class:"d-flex align-center justify-space-between"},Y=R((()=>(0,l.Lk)("span",null,"手機號碼",-1))),J={class:"counter ml-2"},Q={key:1,class:"container user-login-box my-5"},Z={class:"row"},ee={class:"col-lg-4 col-md-8 mx-auto d-flex align-items-center justify-content-center"},te=R((()=>(0,l.Lk)("i",{class:"loading-box"},null,-1))),ae={class:"mb-5"},le={class:"mb-3"},oe={class:"user-login-item"},re={class:"d-flex"};function se(e,t,a,c,m,p){const f=(0,l.g2)("OrderHistory"),v=(0,l.g2)("ForgetPassword"),g=(0,l.g2)("loading"),h=(0,l.g2)("Register");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",O,[m.isLogin?((0,l.uX)(),(0,l.CE)("h2",j,"會員中心")):((0,l.uX)(),(0,l.CE)("h2",U,"會員登入"))]),m.isLogin?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",z,[(0,l.Lk)("div",q,[(0,l.bF)(B.h,{class:"mt-3",modelValue:m.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>m.tab=e),grow:"","align-tabs":"center",color:"light-blue-accent-4"},{default:(0,l.k6)((()=>[(0,l.bF)(L.U,{value:0,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("修改個人資料")])),_:1}),(0,l.bF)(L.U,{value:1,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("歷史訂單查詢")])),_:1}),m.tabCtrl?((0,l.uX)(),(0,l.Wv)(L.U,{key:0,value:2,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("修改密碼")])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue"]),(0,l.bF)(A.l,{modelValue:m.tab,"onUpdate:modelValue":t[8]||(t[8]=e=>m.tab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(T.Y,{value:0},{default:(0,l.k6)((()=>[(0,l.bF)(I.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(P.n,{modelValue:m.valid,"onUpdate:modelValue":t[7]||(t[7]=e=>m.valid=e),ref:"profileForm"},{default:(0,l.k6)((()=>[(0,l.bF)(C.L,{align:"center",justify:"center",class:"mb-4"},{default:(0,l.k6)((()=>[(0,l.bF)(V.B,{cols:"auto",class:"d-flex flex-column align-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{onClick:t[1]||(t[1]=(...e)=>p.triggerFileInput&&p.triggerFileInput(...e)),style:{width:"100px",cursor:"pointer"}},[m.member.image?((0,l.uX)(),(0,l.Wv)($.y,{key:0,src:m.member.image,class:"profile-img",height:"100",width:"100",contain:""},null,8,["src"])):((0,l.uX)(),(0,l.Wv)($.y,{key:1,src:"https://www.iconpacks.net/icons/2/free-user-camera-icon-3355-thumb.png",class:"profile-img",height:"100",width:"100",contain:""}))]),m.member.image?((0,l.uX)(),(0,l.Wv)(s.D,{key:0,color:"red",onClick:p.removeImage,class:"mt-2",small:""},{default:(0,l.k6)((()=>[(0,l.eW)(" 刪除圖片 ")])),_:1},8,["onClick"])):(0,l.Q3)("",!0)])),_:1})])),_:1}),(0,l.bF)(_,{ref:"fileInput",class:"d-none",modelValue:m.uploadImageDetail,"onUpdate:modelValue":t[2]||(t[2]=e=>m.uploadImageDetail=e),accept:"image/*",onChange:p.onImageChange},null,8,["modelValue","onChange"]),(0,l.bF)(N.W,{"prepend-icon":"mdi-account",modelValue:m.member.name,"onUpdate:modelValue":t[3]||(t[3]=e=>m.member.name=e),modelModifiers:{trim:!0},rules:[m.rules.required],maxlength:"25",placeholder:"請輸入姓名",required:""},{label:(0,l.k6)((()=>[(0,l.Lk)("div",K,[G,(0,l.Lk)("span",X,(0,o.v_)(m.member.name.length)+"/25",1)])])),_:1},8,["modelValue","rules"]),(0,l.bF)(N.W,{"prepend-icon":"mdi-email",modelValue:m.member.email,"onUpdate:modelValue":t[4]||(t[4]=e=>m.member.email=e),modelModifiers:{trim:!0},label:"電子郵件",disabled:""},{append:(0,l.k6)((()=>[m.tabCtrl?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(s.D,{key:0,color:"success"},{default:(0,l.k6)((()=>[(0,l.bF)(D.w,null,{default:(0,l.k6)((()=>[(0,l.eW)("mdi-google")])),_:1}),(0,l.eW)(" 已驗證 ")])),_:1})),m.tabCtrl?((0,l.uX)(),(0,l.Wv)(s.D,{key:1,color:"success"},{default:(0,l.k6)((()=>[(0,l.eW)(" 已驗證 ")])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue"]),(0,l.bF)(N.W,{"prepend-icon":"mdi-cellphone",modelValue:m.member.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>m.member.phone=e),modelModifiers:{trim:!0},rules:[m.rules.phone],maxlength:"10",placeholder:"請輸入手機號碼",required:""},{label:(0,l.k6)((()=>[(0,l.Lk)("div",H,[Y,(0,l.Lk)("span",J,(0,o.v_)(m.member.phone.length)+"/10",1)])])),_:1},8,["modelValue","rules"]),(0,l.bF)(N.W,{"prepend-icon":"mdi-map-marker",modelValue:m.member.address,"onUpdate:modelValue":t[6]||(t[6]=e=>m.member.address=e),modelModifiers:{trim:!0},rules:[m.rules.noSpacesOrSpecial],label:"地址",placeholder:"請輸入地址",required:""},null,8,["modelValue","rules"]),(0,l.bF)(s.D,{class:"mb-3 w-100",color:"primary",onClick:p.updateMember},{default:(0,l.k6)((()=>[(0,l.eW)(" 確認修改 ")])),_:1},8,["onClick"]),(0,l.bF)(s.D,{block:"",color:"danger",onClick:p.logout},{default:(0,l.k6)((()=>[(0,l.eW)("登出")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,l.bF)(T.Y,{value:1},{default:(0,l.k6)((()=>[(0,l.bF)(I.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,{ordersInfo:m.propsItem},null,8,["ordersInfo"])])),_:1})])),_:1}),(0,l.bF)(T.Y,{value:2},{default:(0,l.k6)((()=>[(0,l.bF)(I.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onSwitchTab:p.switchTab},null,8,["onSwitchTab"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])):((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("div",Z,[(0,l.Lk)("div",ee,[(0,l.bF)(g,{active:m.isLoading},{default:(0,l.k6)((()=>[te])),_:1},8,["active"]),(0,l.Lk)("div",ae,[(0,l.Lk)("div",le,[(0,l.Lk)("div",oe,[(0,l.Lk)("div",re,[(0,l.bF)(i.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(B.h,{grow:"",modelValue:m.tab,"onUpdate:modelValue":t[9]||(t[9]=e=>m.tab=e),"align-tabs":"center",color:"light-blue-accent-4"},{default:(0,l.k6)((()=>[(0,l.bF)(L.U,{value:0,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("登入")])),_:1}),(0,l.bF)(L.U,{value:1,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("註冊")])),_:1}),(0,l.bF)(L.U,{value:2,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("忘記密碼")])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(A.l,{modelValue:m.tab,"onUpdate:modelValue":t[16]||(t[16]=e=>m.tab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(T.Y,{value:0},{default:(0,l.k6)((()=>[(0,l.bF)(i.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(P.n,{ref:"loginForm",modelValue:m.valid,"onUpdate:modelValue":t[14]||(t[14]=e=>m.valid=e),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(N.W,{"prepend-icon":"mdi-account",modelValue:m.login.account,"onUpdate:modelValue":t[10]||(t[10]=e=>m.login.account=e),rules:[m.rules.required,m.rules.email],label:"帳號",type:"text",placeholder:"請輸入email",required:""},null,8,["modelValue","rules"]),(0,l.bF)(N.W,{type:m.showPassword?"text":"password","prepend-icon":"mdi-lock",modelValue:m.login.password,"onUpdate:modelValue":t[13]||(t[13]=e=>m.login.password=e),rules:[m.rules.required,m.rules.hasUpperCase,m.rules.hasLowerCase,m.rules.min,m.rules.noSpacesOrSpecial],label:"密碼",placeholder:"請輸入密碼",required:""},{append:(0,l.k6)((()=>[(0,l.bF)(D.w,{onMousedown:t[11]||(t[11]=e=>p.togglePasswordVisibility(!0)),onMouseup:t[12]||(t[12]=e=>p.togglePasswordVisibility(!1))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(m.showPassword?"mdi-eye":"mdi-eye-off"),1)])),_:1})])),_:1},8,["type","modelValue","rules"])])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(u.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(E),(0,l.bF)(s.D,{color:"success",onClick:(0,r.D$)(p.loginSubmit,["prevent"])},{default:(0,l.k6)((()=>[(0,l.eW)("登入")])),_:1},8,["onClick"]),(0,l.bF)(s.D,{text:"",color:"warning",onClick:t[15]||(t[15]=e=>p.switchTab(2))},{default:(0,l.k6)((()=>[(0,l.eW)("忘記密碼?")])),_:1})])),_:1}),(0,l.bF)(d.G,null,{default:(0,l.k6)((()=>[(0,l.eW)("第三方登入")])),_:1}),(0,l.bF)(I.I,{class:"d-flex justify-center",style:{width:"50%"}},{default:(0,l.k6)((()=>[(0,l.bF)($.y,{class:"hover-image",src:m.googleLogo,alt:"Google Logo",onClick:p.loginWithGoogle},null,8,["src","onClick"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(T.Y,{value:1},{default:(0,l.k6)((()=>[(0,l.bF)(h,{onSwitchTab:p.switchTab},null,8,["onSwitchTab"])])),_:1}),(0,l.bF)(T.Y,{value:2},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onSwitchTab:p.switchTab},null,8,["onSwitchTab"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])])])])])]))])}function ie(e,t,a,d,c,m){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(i.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(P.n,{ref:"registerForm",modelValue:c.valid,"onUpdate:modelValue":t[9]||(t[9]=e=>c.valid=e),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(N.W,{"prepend-icon":"mdi-account-arrow-left",modelValue:c.register.firstName,"onUpdate:modelValue":t[0]||(t[0]=e=>c.register.firstName=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.noSpacesOrSpecial],label:"名字",placeholder:"請輸入名字",required:""},null,8,["modelValue","rules"]),(0,l.bF)(N.W,{"prepend-icon":"mdi-account-arrow-right",modelValue:c.register.lastName,"onUpdate:modelValue":t[1]||(t[1]=e=>c.register.lastName=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.noSpacesOrSpecial],label:"姓氏",placeholder:"請輸入姓氏",required:""},null,8,["modelValue","rules"]),(0,l.bF)(N.W,{"prepend-icon":"mdi-email",modelValue:c.register.email,"onUpdate:modelValue":t[2]||(t[2]=e=>c.register.email=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.email],label:"電子郵件",placeholder:"請輸入email",required:""},null,8,["modelValue","rules"]),(0,l.bF)(N.W,{type:c.showPassword?"text":"password","prepend-icon":"mdi-lock",modelValue:c.register.password,"onUpdate:modelValue":t[5]||(t[5]=e=>c.register.password=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.hasUpperCase,c.rules.hasLowerCase,c.rules.min,c.rules.noSpacesOrSpecial],label:"密碼",placeholder:"請輸入密碼",required:""},{append:(0,l.k6)((()=>[(0,l.bF)(D.w,{onMousedown:t[3]||(t[3]=e=>m.togglePasswordVisibility(!0)),onMouseup:t[4]||(t[4]=e=>m.togglePasswordVisibility(!1))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(c.showPassword?"mdi-eye":"mdi-eye-off"),1)])),_:1})])),_:1},8,["type","modelValue","rules"]),(0,l.bF)(N.W,{type:c.showconfirmPassword?"text":"password","prepend-icon":"mdi-lock-check",modelValue:c.register.confirmPassword,"onUpdate:modelValue":t[8]||(t[8]=e=>c.register.confirmPassword=e),modelModifiers:{trim:!0},rules:[c.rules.required,m.passwordMatch],label:"密碼確認",placeholder:"請再輸入一次密碼",required:""},{append:(0,l.k6)((()=>[(0,l.bF)(D.w,{onMousedown:t[6]||(t[6]=e=>m.toggleConfirmPasswordVisibility(!0)),onMouseup:t[7]||(t[7]=e=>m.toggleConfirmPasswordVisibility(!1))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(c.showconfirmPassword?"mdi-eye":"mdi-eye-off"),1)])),_:1})])),_:1},8,["type","modelValue","rules"]),(0,l.bF)(u.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(E),(0,l.bF)(s.D,{color:"success",onClick:(0,r.D$)(m.registerSubmit,["prevent"])},{default:(0,l.k6)((()=>[(0,l.eW)("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var ne=a(2541),ue=a(8965),de=a(1884),ce=a(1601),me={data(){return{valid:!1,register:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},showPassword:!1,showconfirmPassword:!1,rules:{noSpacesOrSpecial:e=>{const t=/^[^\s!@#$%^&*(),.?":{}|<>]*$/;return t.test(e)||"不得包含空白或特殊符號"},required:e=>!!e||"此欄位為必填項",email:e=>{const t=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;return t.test(e)||"請輸入有效的電子郵件地址"},min:e=>e.length>=6||"密碼至少需要6個字符",max:e=>e.length<=25||"姓名最多25個字符",hasUpperCase:e=>/[A-Z]/.test(e)||"需包含至少一個大寫英文字母",hasLowerCase:e=>/[a-z]/.test(e)||"需包含至少一個小寫英文字母"}}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},toggleConfirmPasswordVisibility(){this.showconfirmPassword=!this.showconfirmPassword},passwordMatch(e){return e===this.register.password||"密碼不匹配"},registerSubmit(){this.isLoading=!0,this.isRegistering=!0,this.$refs.registerForm.validate().then((e=>{!1===e.valid?ne.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ce.eJ)(ue.j2,this.register.email,this.register.password).then((e=>{const t=e.user;(0,ce.r7)(t,{displayName:this.register.firstName+" "+this.register.lastName}).then((()=>{ue.j2.languageCode="zh-TW",(0,ce.gA)(ue.j2.currentUser).then((()=>{ne.A.fire({icon:"success",title:"註冊成功，驗證信已發送到您的信箱，請點選信中驗證連結"})}))})),this.addUserInfoWithCustomId(t.uid),this.register={email:"",password:"",firstName:"",lastName:"",confirmPassword:""},this.$refs.registerForm.reset(),this.$emit("switchTab",0)})).catch((e=>{switch(console.log(`錯誤：${e.message}`),e.message){case"Firebase: Error (auth/email-already-in-use).":ne.A.fire({icon:"error",title:"帳號已註冊，請到登入頁面登入"});break;default:ne.A.fire({icon:"error",title:"註冊失敗"});break}}))})),this.isLoading=!1},async addUserInfoWithCustomId(e){try{const t=(0,de.H9)(ue.db,"userInfo",e);await(0,de.BN)(t,{address:"",phoneNumber:"",photoURL:null,orders:[],cartItem:[],favorite:[]})}catch(t){console.error("Error adding document: ",t)}}}},pe=a(6262);const fe=(0,pe.A)(me,[["render",ie]]);var ve=fe;function ge(e,t,a,o,u,d){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(i.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(P.n,{ref:"forgetPassword"},{default:(0,l.k6)((()=>[(0,l.bF)(N.W,{"prepend-icon":"mdi-email",ref:"forgetPassword",modelValue:u.forgetPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>u.forgetPassword=e),modelModifiers:{trim:!0},rules:[u.rules.required,u.rules.email],label:"請輸入email"},null,8,["modelValue","rules"]),(0,l.bF)(s.D,{class:"mt-2",type:"submit",block:"",onClick:(0,r.D$)(d.findPassword,["prevent"])},{default:(0,l.k6)((()=>[(0,l.eW)("重設密碼")])),_:1},8,["onClick"])])),_:1},512)])),_:1})])),_:1})])}var he={name:"ForgetPassword",data(){return{forgetPassword:"",rules:{required:e=>!!e||"此欄位為必填項",email:e=>{const t=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;return t.test(e)||"請輸入有效的電子郵件地址"}}}},methods:{findPassword(){this.$refs.forgetPassword.validate().then((e=>{e.length>0?ne.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ce.J1)(ue.j2,this.forgetPassword).then((()=>{ne.A.fire({icon:"success",title:"如果您的信箱已註冊，我們將發送密碼重置郵件給您，請至您的信箱點選信中連結設定新密碼"}),this.forgetPassword="",this.$emit("switchTab",0),this.$refs.forgetPassword.reset()})).catch((e=>{switch(console.log(`錯誤：${e.message}`),e.message){case"Firebase: Error (auth/missing-email).":ne.A.fire({icon:"error",title:"請輸入正確信箱"});break}}))}))}}};const be=(0,pe.A)(he,[["render",ge]]);var ye=be,ke=a(1828),we=a(1348),Fe=a(5851),xe=a(7562),Se=a(62),_e=a(19),Pe=a(8107);function Ie(){const e=(0,y.KR)([]);function t(t,a){e.value[a]=t}return(0,l.Ic)((()=>e.value=[])),{refs:e,updateRef:t}}var Ce=a(2336),Ve=a(5501),We=a(8021),Ee=a(1070),De=a(5841),$e=a(2997);const Be=(0,k.j)({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Pe.TX,default:"$first"},prevIcon:{type:Pe.TX,default:"$prev"},nextIcon:{type:Pe.TX,default:"$next"},lastIcon:{type:Pe.TX,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...(0,we.r)(),...(0,Fe.u)(),...(0,Se.r)(),...(0,_e.s)(),...(0,Ve.S)(),...(0,We.k)(),...(0,Ee.X)({tag:"nav"}),...(0,De.yx)(),...(0,$e.gI)({variant:"text"})},"VPagination"),Le=(0,F.RW)()({name:"VPagination",props:Be(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:a,emit:o}=t;const r=(0,b.q)(e,"modelValue"),{t:i,n:n}=(0,h.Ym)(),{isRtl:u}=(0,h.IA)(),{themeClasses:d}=(0,De.NX)(e),{width:c}=(0,ke._F)(),m=(0,y.IJ)(-1);(0,xe.Uh)(void 0,{scoped:!0});const{resizeRef:p}=(0,Ce.w)((e=>{if(!e.length)return;const{target:t,contentRect:a}=e[0],l=t.querySelector(".v-pagination__list > *");if(!l)return;const o=a.width,r=l.offsetWidth+2*parseFloat(getComputedStyle(l).marginRight);m.value=k(o,r)})),f=(0,l.EW)((()=>parseInt(e.length,10))),v=(0,l.EW)((()=>parseInt(e.start,10))),g=(0,l.EW)((()=>null!=e.totalVisible?parseInt(e.totalVisible,10):m.value>=0?m.value:k(c.value,58)));function k(t,a){const l=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((t-a*l)/a).toFixed(2)))}const F=(0,l.EW)((()=>{if(f.value<=0||isNaN(f.value)||f.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(1===g.value)return[r.value];if(f.value<=g.value)return(0,w.Sd)(f.value,v.value);const t=g.value%2===0,a=t?g.value/2:Math.floor(g.value/2),l=t?a:a+1,o=f.value-a;if(l-r.value>=0)return[...(0,w.Sd)(Math.max(1,g.value-1),v.value),e.ellipsis,f.value];if(r.value-o>=(t?1:0)){const t=g.value-1,a=f.value-t+v.value;return[v.value,e.ellipsis,...(0,w.Sd)(t,a)]}{const t=Math.max(1,g.value-3),a=1===t?r.value:r.value-Math.ceil(t/2)+v.value;return[v.value,e.ellipsis,...(0,w.Sd)(t,a),e.ellipsis,f.value]}}));function S(e,t,a){e.preventDefault(),r.value=t,a&&o(a,t)}const{refs:_,updateRef:P}=Ie();(0,xe.Uh)({VPaginationBtn:{color:(0,y.lW)(e,"color"),border:(0,y.lW)(e,"border"),density:(0,y.lW)(e,"density"),size:(0,y.lW)(e,"size"),variant:(0,y.lW)(e,"variant"),rounded:(0,y.lW)(e,"rounded"),elevation:(0,y.lW)(e,"elevation")}});const I=(0,l.EW)((()=>F.value.map(((t,a)=>{const l=e=>P(e,a);if("string"===typeof t)return{isActive:!1,key:`ellipsis-${a}`,page:t,props:{ref:l,ellipsis:!0,icon:!0,disabled:!0}};{const a=t===r.value;return{isActive:a,key:t,page:n(t),props:{ref:l,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:a?e.activeColor:e.color,"aria-current":a,"aria-label":i(a?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:e=>S(e,t)}}}})))),C=(0,l.EW)((()=>{const t=!!e.disabled||r.value<=v.value,a=!!e.disabled||r.value>=v.value+f.value-1;return{first:e.showFirstLastPage?{icon:u.value?e.lastIcon:e.firstIcon,onClick:e=>S(e,v.value,"first"),disabled:t,"aria-label":i(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:u.value?e.nextIcon:e.prevIcon,onClick:e=>S(e,r.value-1,"prev"),disabled:t,"aria-label":i(e.previousAriaLabel),"aria-disabled":t},next:{icon:u.value?e.prevIcon:e.nextIcon,onClick:e=>S(e,r.value+1,"next"),disabled:a,"aria-label":i(e.nextAriaLabel),"aria-disabled":a},last:e.showFirstLastPage?{icon:u.value?e.firstIcon:e.lastIcon,onClick:e=>S(e,v.value+f.value-1,"last"),disabled:a,"aria-label":i(e.lastAriaLabel),"aria-disabled":a}:void 0}}));function V(){const e=r.value-v.value;_.value[e]?.$el.focus()}function W(t){t.key===w.K7.left&&!e.disabled&&r.value>+e.start?(r.value=r.value-1,(0,l.dY)(V)):t.key===w.K7.right&&!e.disabled&&r.value<v.value+f.value-1&&(r.value=r.value+1,(0,l.dY)(V))}return(0,x.C)((()=>(0,l.bF)(e.tag,{ref:p,class:["v-pagination",d.value,e.class],style:e.style,role:"navigation","aria-label":i(e.ariaLabel),onKeydown:W,"data-test":"v-pagination-root"},{default:()=>[(0,l.bF)("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&(0,l.bF)("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(C.value.first):(0,l.bF)(s.D,(0,l.v6)({_as:"VPaginationBtn"},C.value.first),null)]),(0,l.bF)("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(C.value.prev):(0,l.bF)(s.D,(0,l.v6)({_as:"VPaginationBtn"},C.value.prev),null)]),I.value.map(((e,t)=>(0,l.bF)("li",{key:e.key,class:["v-pagination__item",{"v-pagination__item--is-active":e.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(e):(0,l.bF)(s.D,(0,l.v6)({_as:"VPaginationBtn"},e.props),{default:()=>[e.page]})]))),(0,l.bF)("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(C.value.next):(0,l.bF)(s.D,(0,l.v6)({_as:"VPaginationBtn"},C.value.next),null)]),e.showFirstLastPage&&(0,l.bF)("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(C.value.last):(0,l.bF)(s.D,(0,l.v6)({_as:"VPaginationBtn"},C.value.last),null)])])]}))),{}}});var Ae=a(7278),Te=a(4268);const Ne=(0,k.j)({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Re=Symbol.for("vuetify:data-table-pagination");function Oe(e){const t=(0,b.q)(e,"page",void 0,(e=>+(e??1))),a=(0,b.q)(e,"itemsPerPage",void 0,(e=>+(e??10)));return{page:t,itemsPerPage:a}}function je(e){const{page:t,itemsPerPage:a,itemsLength:o}=e,r=(0,l.EW)((()=>-1===a.value?0:a.value*(t.value-1))),s=(0,l.EW)((()=>-1===a.value?o.value:Math.min(o.value,r.value+a.value))),i=(0,l.EW)((()=>-1===a.value||0===o.value?1:Math.ceil(o.value/a.value)));function n(e){a.value=e,t.value=1}function u(){t.value=(0,w.qE)(t.value+1,1,i.value)}function d(){t.value=(0,w.qE)(t.value-1,1,i.value)}function c(e){t.value=(0,w.qE)(e,1,i.value)}(0,l.nT)((()=>{t.value>i.value&&(t.value=i.value)}));const m={page:t,itemsPerPage:a,startIndex:r,stopIndex:s,pageCount:i,itemsLength:o,nextPage:u,prevPage:d,setPage:c,setItemsPerPage:n};return(0,l.Gt)(Re,m),m}function Ue(){const e=(0,l.WQ)(Re);if(!e)throw new Error("Missing pagination!");return e}function Me(e){const t=(0,Te.nI)("usePaginatedItems"),{items:a,startIndex:o,stopIndex:r,itemsPerPage:s}=e,i=(0,l.EW)((()=>s.value<=0?a.value:a.value.slice(o.value,r.value)));return(0,l.wB)(i,(e=>{t.emit("update:currentItems",e)})),{paginatedItems:i}}const ze=(0,k.j)({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),qe=(0,F.RW)()({name:"VDataTableFooter",props:ze(),setup(e,t){let{slots:a}=t;const{t:o}=(0,h.Ym)(),{page:r,pageCount:s,startIndex:i,stopIndex:n,itemsLength:u,itemsPerPage:d,setItemsPerPage:c}=Ue(),m=(0,l.EW)((()=>e.itemsPerPageOptions.map((e=>"number"===typeof e?{value:e,title:-1===e?o("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?o(e.title):e.title}))));return(0,x.C)((()=>{const t=Le.filterProps(e);return(0,l.bF)("div",{class:"v-data-table-footer"},[a.prepend?.(),(0,l.bF)("div",{class:"v-data-table-footer__items-per-page"},[(0,l.bF)("span",null,[o(e.itemsPerPageText)]),(0,l.bF)(Ae.d4,{items:m.value,modelValue:d.value,"onUpdate:modelValue":e=>c(Number(e)),density:"compact",variant:"outlined","hide-details":!0},null)]),(0,l.bF)("div",{class:"v-data-table-footer__info"},[(0,l.bF)("div",null,[o(e.pageText,u.value?i.value+1:0,n.value,u.value)])]),(0,l.bF)("div",{class:"v-data-table-footer__pagination"},[(0,l.bF)(Le,(0,l.v6)({modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:s.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},t),null)])])})),{}}}),Ke=(0,F.cq)({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},((e,t)=>{let{slots:a}=t;const o=e.tag??"td";return(0,l.bF)(o,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:(0,w.Dg)(e.height),width:(0,w.Dg)(e.width),maxWidth:(0,w.Dg)(e.maxWidth),left:(0,w.Dg)(e.fixedOffset||null)}},{default:()=>[a.default?.()]})}));var Ge=a(5866),Xe=a(4653);const He=(0,k.j)({headers:Array},"DataTable-header"),Ye=Symbol.for("vuetify:data-table-headers"),Je={title:"",sortable:!1},Qe={...Je,width:48};function Ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.map((e=>({element:e,priority:0})));return{enqueue:(e,a)=>{let l=!1;for(let o=0;o<t.length;o++){const r=t[o];if(r.priority>a){t.splice(o,0,{element:e,priority:a}),l=!0;break}}l||t.push({element:e,priority:a})},size:()=>t.length,count:()=>{let e=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let l=0;l<t.length;l++)Math.floor(t[l].priority)===a&&(e+=1);return e},dequeue:()=>t.shift()}}function et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const a of e.children)et(a,t);else t.push(e);return t}function tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&tt(a.children,t);return t}function at(e){if(e.key)return"data-table-group"===e.key?Je:["data-table-expand","data-table-select"].includes(e.key)?Qe:void 0}function lt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map((e=>lt(e,t+1)))):t}function ot(e){let t=!1;function a(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)if(l&&(e.fixed=!0),e.fixed)if(e.children)for(let t=e.children.length-1;t>=0;t--)a(e.children[t],!0);else t?isNaN(+e.width)&&(0,Xe.yA)(`Multiple fixed columns should have a static width (key: ${e.key})`):e.lastFixed=!0,t=!0;else if(e.children)for(let t=e.children.length-1;t>=0;t--)a(e.children[t]);else t=!1}for(let r=e.length-1;r>=0;r--)a(e[r]);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const a of e.children)t=l(a,t)}else e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}let o=0;for(const r of e)o=l(r,o)}function rt(e,t){const a=[];let l=0;const o=Ze(e);while(o.size()>0){let e=o.count();const r=[];let s=1;while(e>0){const{element:a,priority:i}=o.dequeue(),n=t-l-lt(a);if(r.push({...a,rowspan:n??1,colspan:a.children?et(a).length:1}),a.children)for(const e of a.children){const t=i%1+s/Math.pow(10,l+2);o.enqueue(e,l+n+t)}s+=1,e-=1}l+=1,a.push(r)}const r=e.map((e=>et(e))).flat();return{columns:r,headers:a}}function st(e){const t=[];for(const a of e){const e={...at(a),...a},l=e.key??("string"===typeof e.value?e.value:null),o=e.value??l??null,r={...e,key:l,value:o,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?st(e.children):void 0};t.push(r)}return t}function it(e,t){const a=(0,y.KR)([]),r=(0,y.KR)([]),s=(0,y.KR)({}),i=(0,y.KR)({}),n=(0,y.KR)({});(0,l.nT)((()=>{const l=e.headers||Object.keys(e.items[0]??{}).map((e=>({key:e,title:(0,o.ZH)(e)}))),u=l.slice(),d=tt(u);t?.groupBy?.value.length&&!d.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!d.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!d.has("data-table-expand")&&u.push({key:"data-table-expand"});const c=st(u);ot(c);const m=Math.max(...c.map((e=>lt(e))))+1,p=rt(c,m);a.value=p.headers,r.value=p.columns;const f=p.headers.flat(1);for(const e of f)e.key&&(e.sortable&&(e.sort&&(s.value[e.key]=e.sort),e.sortRaw&&(i.value[e.key]=e.sortRaw)),e.filter&&(n.value[e.key]=e.filter))}));const u={headers:a,columns:r,sortFunctions:s,sortRawFunctions:i,filterFunctions:n};return(0,l.Gt)(Ye,u),u}function nt(){const e=(0,l.WQ)(Ye);if(!e)throw new Error("Missing headers!");return e}const ut={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:a}=e;return new Set(a?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},dt={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const o of t)a?l.add(o.value):l.delete(o.value);return l},selectAll:e=>{let{value:t,currentPage:a,selected:l}=e;return dt.select({items:a,value:t,selected:l})}},ct={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const o of t)a?l.add(o.value):l.delete(o.value);return l},selectAll:e=>{let{value:t,allItems:a,selected:l}=e;return ct.select({items:a,value:t,selected:l})}},mt=(0,k.j)({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:w.bD}},"DataTable-select"),pt=Symbol.for("vuetify:data-table-selection");function ft(e,t){let{allItems:a,currentPage:o}=t;const r=(0,b.q)(e,"modelValue",e.modelValue,(t=>new Set((0,w.BN)(t).map((t=>a.value.find((a=>e.valueComparator(t,a.value)))?.value??t)))),(e=>[...e.values()])),s=(0,l.EW)((()=>a.value.filter((e=>e.selectable)))),i=(0,l.EW)((()=>o.value.filter((e=>e.selectable)))),n=(0,l.EW)((()=>{if("object"===typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single":return ut;case"all":return ct;case"page":default:return dt}}));function u(e){return(0,w.BN)(e).every((e=>r.value.has(e.value)))}function d(e){return(0,w.BN)(e).some((e=>r.value.has(e.value)))}function c(e,t){const a=n.value.select({items:e,value:t,selected:new Set(r.value)});r.value=a}function m(e){c([e],!u([e]))}function p(e){const t=n.value.selectAll({value:e,allItems:s.value,currentPage:i.value,selected:new Set(r.value)});r.value=t}const f=(0,l.EW)((()=>r.value.size>0)),v=(0,l.EW)((()=>{const e=n.value.allSelected({allItems:s.value,currentPage:i.value});return!!e.length&&u(e)})),g=(0,l.EW)((()=>n.value.showSelectAll)),h={toggleSelect:m,select:c,selectAll:p,isSelected:u,isSomeSelected:d,someSelected:f,allSelected:v,showSelectAll:g};return(0,l.Gt)(pt,h),h}function vt(){const e=(0,l.WQ)(pt);if(!e)throw new Error("Missing selection!");return e}const gt=(0,k.j)({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),ht=Symbol.for("vuetify:data-table-sort");function bt(e){const t=(0,b.q)(e,"sortBy"),a=(0,y.lW)(e,"mustSort"),l=(0,y.lW)(e,"multiSort");return{sortBy:t,mustSort:a,multiSort:l}}function yt(e){const{sortBy:t,mustSort:a,multiSort:o,page:r}=e,s=e=>{if(null==e.key)return;let l=t.value.map((e=>({...e})))??[];const s=l.find((t=>t.key===e.key));s?"desc"===s.order?a.value?s.order="asc":l=l.filter((t=>t.key!==e.key)):s.order="desc":l=o.value?[...l,{key:e.key,order:"asc"}]:[{key:e.key,order:"asc"}],t.value=l,r&&(r.value=1)};function i(e){return!!t.value.find((t=>t.key===e.key))}const n={sortBy:t,toggleSort:s,isSorted:i};return(0,l.Gt)(ht,n),n}function kt(){const e=(0,l.WQ)(ht);if(!e)throw new Error("Missing sort!");return e}function wt(e,t,a,o){const r=(0,h.Ym)(),s=(0,l.EW)((()=>!a.value.length||e.disableSort?t.value:Ft(t.value,a.value,r.current.value,{transform:o?.transform,sortFunctions:{...e.customKeySort,...o?.sortFunctions?.value},sortRawFunctions:o?.sortRawFunctions?.value})));return{sortedItems:s}}function Ft(e,t,a,l){const o=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"}),r=e.map((e=>[e,l?.transform?l.transform(e):e]));return r.sort(((e,a)=>{for(let r=0;r<t.length;r++){let s=!1;const i=t[r].key,n=t[r].order??"asc";if(!1===n)continue;let u=e[1][i],d=a[1][i],c=e[0].raw,m=a[0].raw;if("desc"===n&&([u,d]=[d,u],[c,m]=[m,c]),l?.sortRawFunctions?.[i]){const e=l.sortRawFunctions[i](c,m);if(null==e)continue;if(s=!0,e)return e}if(l?.sortFunctions?.[i]){const e=l.sortFunctions[i](u,d);if(null==e)continue;if(s=!0,e)return e}if(!s){if(u instanceof Date&&d instanceof Date)return u.getTime()-d.getTime();if([u,d]=[u,d].map((e=>null!=e?e.toString().toLocaleLowerCase():e)),u!==d)return(0,w.Im)(u)&&(0,w.Im)(d)?0:(0,w.Im)(u)?-1:(0,w.Im)(d)?1:isNaN(u)||isNaN(d)?o.compare(u,d):Number(u)-Number(d)}}return 0})).map((e=>{let[t]=e;return t}))}var xt=a(3683),St=a(1679);const _t=(0,k.j)({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:Pe.TX,default:"$sortAsc"},sortDescIcon:{type:Pe.TX,default:"$sortDesc"},headerProps:{type:Object},...(0,ke.hx)(),...(0,St.gi)()},"VDataTableHeaders"),Pt=(0,F.RW)()({name:"VDataTableHeaders",props:_t(),setup(e,t){let{slots:a}=t;const{t:o}=(0,h.Ym)(),{toggleSort:r,sortBy:s,isSorted:i}=kt(),{someSelected:n,allSelected:u,selectAll:d,showSelectAll:m}=vt(),{columns:p,headers:f}=nt(),{loaderClasses:v}=(0,St.pn)(e);function g(t,a){if(e.sticky||t.fixed)return{position:"sticky",left:t.fixed?(0,w.Dg)(t.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${a})`:void 0}}function b(t){const a=s.value.find((e=>e.key===t.key));return a?"asc"===a.order?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:y,backgroundColorStyles:k}=(0,xt.z6)(e,"color"),{displayClasses:F,mobile:S}=(0,ke._F)(e),_=(0,l.EW)((()=>({headers:f.value,columns:p.value,toggleSort:r,isSorted:i,sortBy:s.value,someSelected:n.value,allSelected:u.value,selectAll:d,getSortIcon:b}))),P=(0,l.EW)((()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},F.value,v.value])),I=t=>{let{column:o,x:c,y:p}=t;const f="data-table-select"===o.key||"data-table-expand"===o.key,v=(0,l.v6)(e.headerProps??{},o.headerProps??{});return(0,l.bF)(Ke,(0,l.v6)({tag:"th",align:o.align,class:[{"v-data-table__th--sortable":o.sortable&&!e.disableSort,"v-data-table__th--sorted":i(o),"v-data-table__th--fixed":o.fixed},...P.value],style:{width:(0,w.Dg)(o.width),minWidth:(0,w.Dg)(o.minWidth),maxWidth:(0,w.Dg)(o.maxWidth),...g(o,p)},colspan:o.colspan,rowspan:o.rowspan,onClick:o.sortable?()=>r(o):void 0,fixed:o.fixed,nowrap:o.nowrap,lastFixed:o.lastFixed,noPadding:f},v),{default:()=>{const t=`header.${o.key}`,c={column:o,selectAll:d,isSorted:i,toggleSort:r,sortBy:s.value,someSelected:n.value,allSelected:u.value,getSortIcon:b};return a[t]?a[t](c):"data-table-select"===o.key?a["header.data-table-select"]?.(c)??(m.value&&(0,l.bF)(Ge.M,{modelValue:u.value,indeterminate:n.value&&!u.value,"onUpdate:modelValue":d},null)):(0,l.bF)("div",{class:"v-data-table-header__content"},[(0,l.bF)("span",null,[o.title]),o.sortable&&!e.disableSort&&(0,l.bF)(D.w,{key:"icon",class:"v-data-table-header__sort-icon",icon:b(o)},null),e.multiSort&&i(o)&&(0,l.bF)("div",{key:"badge",class:["v-data-table-header__sort-badge",...y.value],style:k.value},[s.value.findIndex((e=>e.key===o.key))+1])])}})},C=()=>{const t=(0,l.v6)(e.headerProps??{}??{}),m=(0,l.EW)((()=>p.value.filter((t=>t?.sortable&&!e.disableSort)))),v=(0,l.EW)((()=>{const e=p.value.find((e=>"data-table-select"===e.key));if(null!=e)return u.value?"$checkboxOn":n.value?"$checkboxIndeterminate":"$checkboxOff"}));return(0,l.bF)(Ke,(0,l.v6)({tag:"th",class:[...P.value],colspan:f.value.length+1},t),{default:()=>[(0,l.bF)("div",{class:"v-data-table-header__content"},[(0,l.bF)(Ae.d4,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:m.value,label:o("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>s.value=[],appendIcon:v.value,"onClick:append":()=>d(!u.value)},{...a,chip:e=>(0,l.bF)(c.x,{onClick:e.item.raw?.sortable?()=>r(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,(0,l.bF)(D.w,{class:["v-data-table__td-sort-icon",i(e.item.raw)&&"v-data-table__td-sort-icon-active"],icon:b(e.item.raw),size:"small"},null)]})})])]})};(0,x.C)((()=>S.value?(0,l.bF)("tr",null,[(0,l.bF)(C,null,null)]):(0,l.bF)(l.FK,null,[a.headers?a.headers(_.value):f.value.map(((e,t)=>(0,l.bF)("tr",null,[e.map(((e,a)=>(0,l.bF)(I,{column:e,x:a,y:t},null)))]))),e.loading&&(0,l.bF)("tr",{class:"v-data-table-progress"},[(0,l.bF)("th",{colspan:p.value.length},[(0,l.bF)(St.E2,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0},{default:a.loader})])])])))}}),It=(0,k.j)({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Ct=Symbol.for("vuetify:data-table-group");function Vt(e){const t=(0,b.q)(e,"groupBy");return{groupBy:t}}function Wt(e){const{groupBy:t,sortBy:a}=e,o=(0,y.KR)(new Set),r=(0,l.EW)((()=>t.value.map((e=>({...e,order:e.order??!1}))).concat(a.value)));function s(e){return o.value.has(e.id)}function i(e){const t=new Set(o.value);s(e)?t.delete(e.id):t.add(e.id),o.value=t}function n(e){function t(e){const a=[];for(const l of e.items)"type"in l&&"group"===l.type?a.push(...t(l)):a.push(l);return a}return t({type:"group",items:e,id:"dummy",key:"dummy",value:"dummy",depth:0})}const u={sortByWithGroups:r,toggleGroup:i,opened:o,groupBy:t,extractRows:n,isGroupOpen:s};return(0,l.Gt)(Ct,u),u}function Et(){const e=(0,l.WQ)(Ct);if(!e)throw new Error("Missing group!");return e}function Dt(e,t){if(!e.length)return[];const a=new Map;for(const l of e){const e=(0,w.no)(l.raw,t);a.has(e)||a.set(e,[]),a.get(e).push(l)}return a}function $t(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!t.length)return[];const o=Dt(e,t[0]),r=[],s=t.slice(1);return o.forEach(((e,o)=>{const i=t[0],n=`${l}_${i}_${o}`;r.push({depth:a,id:n,key:i,value:o,items:s.length?$t(e,s,a+1,n):e,type:"group"})})),r}function Bt(e,t){const a=[];for(const l of e)"type"in l&&"group"===l.type?(null!=l.value&&a.push(l),(t.has(l.id)||null==l.value)&&a.push(...Bt(l.items,t))):a.push(l);return a}function Lt(e,t,a){const o=(0,l.EW)((()=>{if(!t.value.length)return e.value;const l=$t(e.value,t.value.map((e=>e.key)));return Bt(l,a.value)}));return{flatItems:o}}const At=(0,k.j)({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Tt=(0,F.RW)()({name:"VDataTableGroupHeaderRow",props:At(),setup(e,t){let{slots:a}=t;const{isGroupOpen:o,toggleGroup:r,extractRows:i}=Et(),{isSelected:n,isSomeSelected:u,select:d}=vt(),{columns:c}=nt(),m=(0,l.EW)((()=>i([e.item])));return()=>(0,l.bF)("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[c.value.map((t=>{if("data-table-group"===t.key){const t=o(e.item)?"$expand":"$next",i=()=>r(e.item);return a["data-table-group"]?.({item:e.item,count:m.value.length,props:{icon:t,onClick:i}})??(0,l.bF)(Ke,{class:"v-data-table-group-header-row__column"},{default:()=>[(0,l.bF)(s.D,{size:"small",variant:"text",icon:t,onClick:i},null),(0,l.bF)("span",null,[e.item.value]),(0,l.bF)("span",null,[(0,l.eW)("("),m.value.length,(0,l.eW)(")")])]})}if("data-table-select"===t.key){const e=n(m.value),t=u(m.value)&&!e,o=e=>d(m.value,e);return a["data-table-select"]?.({props:{modelValue:e,indeterminate:t,"onUpdate:modelValue":o}})??(0,l.bF)("td",null,[(0,l.bF)(Ge.M,{modelValue:e,indeterminate:t,"onUpdate:modelValue":o},null)])}return(0,l.bF)("td",null,null)}))])}}),Nt=(0,k.j)({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Rt=Symbol.for("vuetify:datatable:expanded");function Ot(e){const t=(0,y.lW)(e,"expandOnClick"),a=(0,b.q)(e,"expanded",e.expanded,(e=>new Set(e)),(e=>[...e.values()]));function o(e,t){const l=new Set(a.value);t?l.add(e.value):l.delete(e.value),a.value=l}function r(e){return a.value.has(e.value)}function s(e){o(e,!r(e))}const i={expand:o,expanded:a,expandOnClick:t,isExpanded:r,toggleExpand:s};return(0,l.Gt)(Rt,i),i}function jt(){const e=(0,l.WQ)(Rt);if(!e)throw new Error("foo");return e}const Ut=(0,k.j)({index:Number,item:Object,cellProps:[Object,Function],onClick:(0,w.uR)(),onContextmenu:(0,w.uR)(),onDblclick:(0,w.uR)(),...(0,ke.hx)()},"VDataTableRow"),Mt=(0,F.RW)()({name:"VDataTableRow",props:Ut(),setup(e,t){let{slots:a}=t;const{displayClasses:i,mobile:n}=(0,ke._F)(e,"v-data-table__tr"),{isSelected:u,toggleSelect:d,someSelected:c,allSelected:m,selectAll:p}=vt(),{isExpanded:f,toggleExpand:v}=jt(),{toggleSort:g,sortBy:h,isSorted:b}=kt(),{columns:y}=nt();(0,x.C)((()=>(0,l.bF)("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},i.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map(((t,i)=>{const y=e.item,k=`item.${t.key}`,F=`header.${t.key}`,x={index:e.index,item:y.raw,internalItem:y,value:(0,w.no)(y.columns,t.key),column:t,isSelected:u,toggleSelect:d,isExpanded:f,toggleExpand:v},S={column:t,selectAll:p,isSorted:b,toggleSort:g,sortBy:h.value,someSelected:c.value,allSelected:m.value,getSortIcon:()=>""},_="function"===typeof e.cellProps?e.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value,column:t}):e.cellProps,P="function"===typeof t.cellProps?t.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value}):t.cellProps;return(0,l.bF)(Ke,(0,l.v6)({align:t.align,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,lastFixed:t.lastFixed,maxWidth:n.value?void 0:t.maxWidth,noPadding:"data-table-select"===t.key||"data-table-expand"===t.key,nowrap:t.nowrap,width:n.value?void 0:t.width},_,P),{default:()=>{if(a[k]&&!n.value)return a[k]?.(x);if("data-table-select"===t.key)return a["item.data-table-select"]?.(x)??(0,l.bF)(Ge.M,{disabled:!y.selectable,modelValue:u([y]),onClick:(0,r.D$)((()=>d(y)),["stop"])},null);if("data-table-expand"===t.key)return a["item.data-table-expand"]?.(x)??(0,l.bF)(s.D,{icon:f(y)?"$collapse":"$expand",size:"small",variant:"text",onClick:(0,r.D$)((()=>v(y)),["stop"])},null);const e=(0,o.v_)(x.value);return n.value?(0,l.bF)(l.FK,null,[(0,l.bF)("div",{class:"v-data-table__td-title"},[a[F]?.(S)??t.title]),(0,l.bF)("div",{class:"v-data-table__td-value"},[a[k]?.(x)??e])]):e}})}))])))}});function zt(e,t,a){return Object.keys(e).filter((e=>(0,w.Mp)(e)&&e.endsWith(t))).reduce(((l,o)=>(l[o.slice(0,-t.length)]=t=>e[o](t,a(t)),l)),{})}const qt=(0,k.j)({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...(0,ke.hx)()},"VDataTableRows"),Kt=(0,F.RW)()({name:"VDataTableRows",inheritAttrs:!1,props:qt(),setup(e,t){let{attrs:a,slots:o}=t;const{columns:r}=nt(),{expandOnClick:s,toggleExpand:i,isExpanded:n}=jt(),{isSelected:u,toggleSelect:d}=vt(),{toggleGroup:c,isGroupOpen:m}=Et(),{t:p}=(0,h.Ym)(),{mobile:f}=(0,ke._F)(e);return(0,x.C)((()=>!e.loading||e.items.length&&!o.loading?e.loading||e.items.length||e.hideNoData?(0,l.bF)(l.FK,null,[e.items.map(((t,p)=>{if("group"===t.type){const e={index:p,item:t,columns:r.value,isExpanded:n,toggleExpand:i,isSelected:u,toggleSelect:d,toggleGroup:c,isGroupOpen:m};return o["group-header"]?o["group-header"](e):(0,l.bF)(Tt,(0,l.v6)({key:`group-header_${t.id}`,item:t},zt(a,":group-header",(()=>e))),o)}const v={index:p,item:t.raw,internalItem:t,columns:r.value,isExpanded:n,toggleExpand:i,isSelected:u,toggleSelect:d},g={...v,props:(0,l.v6)({key:`item_${t.key??t.index}`,onClick:s.value?()=>{i(t)}:void 0,index:p,item:t,cellProps:e.cellProps,mobile:f.value},zt(a,":row",(()=>v)),"function"===typeof e.rowProps?e.rowProps({item:v.item,index:v.index,internalItem:v.internalItem}):e.rowProps)};return(0,l.bF)(l.FK,{key:g.props.key},[o.item?o.item(g):(0,l.bF)(Mt,g.props,o),n(t)&&o["expanded-row"]?.(v)])}))]):(0,l.bF)("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[(0,l.bF)("td",{colspan:r.value.length},[o["no-data"]?.()??p(e.noDataText)])]):(0,l.bF)("tr",{class:"v-data-table-rows-loading",key:"loading"},[(0,l.bF)("td",{colspan:r.value.length},[o.loading?.()??p(e.loadingText)])]))),{}}}),Gt=(0,k.j)({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...(0,Fe.u)(),...(0,Se.r)(),...(0,Ee.X)(),...(0,De.yx)()},"VTable"),Xt=(0,F.RW)()({name:"VTable",props:Gt(),setup(e,t){let{slots:a,emit:o}=t;const{themeClasses:r}=(0,De.NX)(e),{densityClasses:s}=(0,Se.Q)(e);return(0,x.C)((()=>(0,l.bF)(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover},r.value,s.value,e.class],style:e.style},{default:()=>[a.top?.(),a.default?(0,l.bF)("div",{class:"v-table__wrapper",style:{height:(0,w.Dg)(e.height)}},[(0,l.bF)("table",null,[a.default()])]):a.wrapper?.(),a.bottom?.()]}))),{}}}),Ht=(0,k.j)({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Yt(e,t,a,l){const o=e.returnObject?t:(0,w.TD)(t,e.itemValue),r=(0,w.TD)(t,e.itemSelectable,!0),s=l.reduce(((e,a)=>(null!=a.key&&(e[a.key]=(0,w.TD)(t,a.value)),e)),{});return{type:"item",key:e.returnObject?(0,w.TD)(t,e.itemValue):o,index:a,value:o,selectable:r,columns:s,raw:t}}function Jt(e,t,a){return t.map(((t,l)=>Yt(e,t,l,a)))}function Qt(e,t){const a=(0,l.EW)((()=>Jt(e,e.items,t.value)));return{items:a}}function Zt(e){let{page:t,itemsPerPage:a,sortBy:o,groupBy:r,search:s}=e;const i=(0,Te.nI)("VDataTable"),n=(0,l.EW)((()=>({page:t.value,itemsPerPage:a.value,sortBy:o.value,groupBy:r.value,search:s.value})));let u=null;(0,l.wB)(n,(()=>{(0,w.bD)(u,n.value)||(u&&u.search!==n.value.search&&(t.value=1),i.emit("update:options",n.value),u=n.value)}),{deep:!0,immediate:!0})}const ea=(e,t,a)=>null==e||null==t?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),ta=(0,k.j)({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function aa(e,t,a){const l=[],o=a?.default??ea,r=!!a?.filterKeys&&(0,w.BN)(a.filterKeys),s=Object.keys(a?.customKeyFilter??{}).length;if(!e?.length)return l;e:for(let i=0;i<e.length;i++){const[n,u=n]=(0,w.BN)(e[i]),d={},c={};let m=-1;if((t||s>0)&&!a?.noFilter){if("object"===typeof n){const e=r||Object.keys(u);for(const l of e){const e=(0,w.TD)(u,l),r=a?.customKeyFilter?.[l];if(m=r?r(e,t,n):o(e,t,n),-1!==m&&!1!==m)r?d[l]=m:c[l]=m;else if("every"===a?.filterMode)continue e}}else m=o(n,t,n),-1!==m&&!1!==m&&(c.title=m);const e=Object.keys(c).length,l=Object.keys(d).length;if(!e&&!l)continue;if("union"===a?.filterMode&&l!==s&&!e)continue;if("intersection"===a?.filterMode&&(l!==s||!e))continue}l.push({index:i,matches:{...c,...d}})}return l}function la(e,t,a,o){const r=(0,y.KR)([]),s=(0,y.KR)(new Map),i=(0,l.EW)((()=>o?.transform?(0,y.R1)(t).map((e=>[e,o.transform(e)])):(0,y.R1)(t)));function n(e){return s.value.get(e.value)}return(0,l.nT)((()=>{const l="function"===typeof a?a():(0,y.R1)(a),n="string"!==typeof l&&"number"!==typeof l?"":String(l),u=aa(i.value,n,{customKeyFilter:{...e.customKeyFilter,...(0,y.R1)(o?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=(0,y.R1)(t),c=[],m=new Map;u.forEach((e=>{let{index:t,matches:a}=e;const l=d[t];c.push(l),m.set(l.value,a)})),r.value=c,s.value=m})),{filteredItems:r,filteredMatches:s,getMatches:n}}const oa=(0,k.j)({...qt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Nt(),...It(),...He(),...Ht(),...mt(),...gt(),..._t(),...Gt()},"DataTable"),ra=(0,k.j)({...Ne(),...oa(),...ta(),...ze()},"VDataTable"),sa=(0,F.RW)()({name:"VDataTable",props:ra(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:o}=t;const{groupBy:r}=Vt(e),{sortBy:s,multiSort:i,mustSort:n}=bt(e),{page:u,itemsPerPage:c}=Oe(e),{columns:m,headers:p,sortFunctions:f,sortRawFunctions:v,filterFunctions:g}=it(e,{groupBy:r,showSelect:(0,y.lW)(e,"showSelect"),showExpand:(0,y.lW)(e,"showExpand")}),{items:h}=Qt(e,m),b=(0,y.lW)(e,"search"),{filteredItems:k}=la(e,h,b,{transform:e=>e.columns,customKeyFilter:g}),{toggleSort:w}=yt({sortBy:s,multiSort:i,mustSort:n,page:u}),{sortByWithGroups:F,opened:S,extractRows:_,isGroupOpen:P,toggleGroup:I}=Wt({groupBy:r,sortBy:s}),{sortedItems:C}=wt(e,k,F,{transform:e=>e.columns,sortFunctions:f,sortRawFunctions:v}),{flatItems:V}=Lt(C,r,S),W=(0,l.EW)((()=>V.value.length)),{startIndex:E,stopIndex:D,pageCount:$,setItemsPerPage:B}=je({page:u,itemsPerPage:c,itemsLength:W}),{paginatedItems:L}=Me({items:V,startIndex:E,stopIndex:D,itemsPerPage:c}),A=(0,l.EW)((()=>_(L.value))),{isSelected:T,select:N,selectAll:R,toggleSelect:O,someSelected:j,allSelected:U}=ft(e,{allItems:h,currentPage:A}),{isExpanded:M,toggleExpand:z}=Ot(e);Zt({page:u,itemsPerPage:c,sortBy:s,groupBy:r,search:b}),(0,xe.Uh)({VDataTableRows:{hideNoData:(0,y.lW)(e,"hideNoData"),noDataText:(0,y.lW)(e,"noDataText"),loading:(0,y.lW)(e,"loading"),loadingText:(0,y.lW)(e,"loadingText")}});const q=(0,l.EW)((()=>({page:u.value,itemsPerPage:c.value,sortBy:s.value,pageCount:$.value,toggleSort:w,setItemsPerPage:B,someSelected:j.value,allSelected:U.value,isSelected:T,select:N,selectAll:R,toggleSelect:O,isExpanded:M,toggleExpand:z,isGroupOpen:P,toggleGroup:I,items:A.value.map((e=>e.raw)),internalItems:A.value,groupedItems:L.value,columns:m.value,headers:p.value})));return(0,x.C)((()=>{const t=qe.filterProps(e),r=Pt.filterProps(e),s=Kt.filterProps(e),i=Xt.filterProps(e);return(0,l.bF)(Xt,(0,l.v6)({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},i),{top:()=>o.top?.(q.value),default:()=>o.default?o.default(q.value):(0,l.bF)(l.FK,null,[o.colgroup?.(q.value),!e.hideDefaultHeader&&(0,l.bF)("thead",{key:"thead"},[(0,l.bF)(Pt,r,o)]),o.thead?.(q.value),!e.hideDefaultBody&&(0,l.bF)("tbody",null,[o["body.prepend"]?.(q.value),o.body?o.body(q.value):(0,l.bF)(Kt,(0,l.v6)(a,s,{items:L.value}),o),o["body.append"]?.(q.value)]),o.tbody?.(q.value),o.tfoot?.(q.value)]),bottom:()=>o.bottom?o.bottom(q.value):!e.hideDefaultFooter&&(0,l.bF)(l.FK,null,[(0,l.bF)(d.G,null,null),(0,l.bF)(qe,t,{prepend:o["footer.prepend"]})])})})),{}}});var ia=a(5676);const na=["onClick"],ua=["onClick"],da={key:0,class:"text-success"},ca={key:1,class:"text-danger"},ma=["onClick"],pa=["onClick"],fa={key:0,class:"text-success"},va={key:1,class:"text-danger"};function ga(e,t,a,s,u,d){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(i.J,{class:"table-order"},{default:(0,l.k6)((()=>[(0,l.bF)(sa,{headers:u.headers,items:d.filteredOrders,class:"elevation-1","items-per-page":5,"footer-props":{itemsPerPageOptions:[]}},{top:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(N.W,{class:"mx-4 mb-2",modelValue:u.search,"onUpdate:modelValue":t[0]||(t[0]=e=>u.search=e),onInput:d.onClick,loading:u.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"搜尋訂單編號",placeholder:"輸入訂單編號",variant:"solo","hide-details":"","single-line":""},null,8,["modelValue","onInput","loading"])])),_:1})])),"item.create_at":(0,l.k6)((({item:t})=>[(0,l.eW)((0,o.v_)(e.$filters.date(t.create_at)),1)])),"item.orderId":(0,l.k6)((({item:e})=>[!0===e.is_paid?((0,l.uX)(),(0,l.CE)("a",{key:0,onClick:(0,r.D$)((t=>d.viewOrder(e)),["prevent"]),class:"order-id"},(0,o.v_)(e.orderId),9,na)):((0,l.uX)(),(0,l.CE)("a",{key:1,onClick:(0,r.D$)((t=>d.viewOrder(e)),["prevent"]),class:"order-id-no-pay"},(0,o.v_)(e.orderId),9,ua))])),"item.cartTotal":(0,l.k6)((({item:t})=>[(0,l.eW)((0,o.v_)(e.$filters.currency(t.cartTotal)),1)])),"item.is_paid":(0,l.k6)((({item:e})=>[!0===e.is_paid?((0,l.uX)(),(0,l.CE)("span",da,"已付款")):((0,l.uX)(),(0,l.CE)("span",ca,"未付款"))])),_:1},8,["headers","items"])])),_:1}),(0,l.bF)(i.J,{class:"table-list mt-3"},{default:(0,l.k6)((()=>[(0,l.bF)(C.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(V.B,{cols:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(N.W,{class:"mt-3 mx-4 mb-2",modelValue:u.search,"onUpdate:modelValue":t[1]||(t[1]=e=>u.search=e),onInput:d.onClick,loading:u.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"搜尋訂單編號",placeholder:"輸入訂單編號",variant:"solo","hide-details":"","single-line":""},null,8,["modelValue","onInput","loading"])])),_:1})])),_:1}),(0,l.bF)(i.J,{class:"list-header ma-2",style:{"max-height":"200px","overflow-y":"scroll"}},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(C.L,{"no-gutters":""},{default:(0,l.k6)((()=>[(0,l.bF)(V.B,{cols:d.dateCol},{default:(0,l.k6)((()=>[(0,l.eW)("建立日期")])),_:1},8,["cols"]),(0,l.bF)(V.B,{cols:d.orderCol,class:"text-left"},{default:(0,l.k6)((()=>[(0,l.eW)("訂單編號 ( 點擊查看 )")])),_:1},8,["cols"]),(0,l.bo)((0,l.bF)(V.B,{cols:"2",class:"text-left"},{default:(0,l.k6)((()=>[(0,l.eW)("付款狀態")])),_:1},512),[[r.aG,!u.isSmallScreen]])])),_:1})])),_:1})])),_:1}),(0,l.bF)(ia.h,{items:d.filteredOrders,height:"320","item-height":"48"},{default:(0,l.k6)((({item:t})=>[(0,l.bF)(i.J,{class:"ma-2"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(C.L,{"no-gutters":""},{default:(0,l.k6)((()=>[(0,l.bF)(V.B,{cols:d.dateCol},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$filters.date(t.create_at)),1)])),_:2},1032,["cols"]),(0,l.bF)(V.B,{cols:d.orderCol,class:"text-left"},{default:(0,l.k6)((()=>[!0===t.is_paid?((0,l.uX)(),(0,l.CE)("a",{key:0,onClick:(0,r.D$)((e=>d.viewOrder(t)),["prevent"]),class:"order-id"},(0,o.v_)(t.orderId),9,ma)):((0,l.uX)(),(0,l.CE)("a",{key:1,onClick:(0,r.D$)((e=>d.viewOrder(t)),["prevent"]),class:"order-id-no-pay"},(0,o.v_)(t.orderId),9,pa))])),_:2},1032,["cols"]),(0,l.bo)((0,l.bF)(V.B,{cols:"2",class:"text-left"},{default:(0,l.k6)((()=>[!0===t.is_paid?((0,l.uX)(),(0,l.CE)("span",fa,"已付款")):((0,l.uX)(),(0,l.CE)("span",va,"未付款"))])),_:2},1536),[[r.aG,!u.isSmallScreen]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["items"])])),_:1})],64)}var ha={name:"OrderHistory",props:{ordersInfo:{type:Array,default:()=>[]}},data(){return{search:"",loaded:!1,loading:!1,headers:[{title:"訂單日期",key:"create_at"},{title:"訂單編號 ( 點擊查看 )",key:"orderId",sortable:!1},{title:"金額",key:"cartTotal"},{title:"付款方式",key:"payment",sortable:!1},{title:"付款狀態",key:"is_paid",sortable:!1}],orders:[],localOrdersInfo:this.ordersInfo,isSmallScreen:!1}},watch:{ordersInfo:{immediate:!0,handler(e){Array.isArray(e)?this.localOrdersInfo=e:this.localOrdersInfo=[]}}},mounted(){this.orders=[],this.localOrdersInfo.forEach((e=>{const t={orderId:e.orderId,create_at:e.create_at,is_paid:e.is_paid,cartTotal:e.cartTotal,payment:e.payment};this.orders.push(t),this.orders.sort(((e,t)=>t.create_at-e.create_at))})),this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},beforeDestroy(){window.removeEventListener("resize",this.checkScreenSize)},computed:{filteredOrders(){return""===this.search?this.orders:this.orders.filter((e=>e.orderId.includes(this.search)))},dateCol(){return this.isSmallScreen?4:3},orderCol(){return this.isSmallScreen?8:7}},methods:{onClick(){this.loading=!0,setTimeout((()=>{this.loading=!1,this.loaded=!0}),1500)},viewOrder(e){this.$router.push(`/checkout/${e.orderId}`)},checkScreenSize(){this.isSmallScreen=window.innerWidth<=500}}};const ba=(0,pe.A)(ha,[["render",ga],["__scopeId","data-v-40bb7660"]]);var ya=ba,ka=a.p+"img/google.3713fc55.png",wa={data(){return{googleLogo:ka,showPassword:!1,isLoading:!1,tab:0,isLogin:!1,isRegistering:!1,displayName:"",userInfo:[],carts:[],member:{name:"",email:"",password:"",phone:"",address:"",image:null},uploadImageDetail:null,valid:!1,login:{account:"",password:""},tabCtrl:!0,propsItem:{},rules:{noSpacesOrSpecial:e=>{const t=/^[^\s!@#$%^&*(),.?":{}|<>]*$/;return t.test(e)||"不得包含空白或特殊符號"},required:e=>!!e||"此欄位為必填項",email:e=>{const t=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;return t.test(e)||"請輸入有效的電子郵件地址"},phone:e=>{const t=/^09\d{8}$/;return t.test(e)||"請輸入正確的手機號碼"},min:e=>e.length>=6||"密碼至少需要6個字符",max:e=>e.length<=25||"姓名最多25個字符",hasUpperCase:e=>/[A-Z]/.test(e)||"需包含至少一個大寫英文字母",hasLowerCase:e=>/[a-z]/.test(e)||"需包含至少一個小寫英文字母"},uid:null}},components:{OrderHistory:ya,ForgetPassword:ye,Register:ve},watch:{isLogin(e,t){}},created(){this.isLoading=!0,(0,ce.hg)(ue.j2,(e=>{e&&e.emailVerified&&(this.isLogin=!0,this.uid=e.uid,this.displayName=e.displayName,this.member.name=e.displayName,this.member.email=e.email,"password"===e.providerData[0].providerId?this.tabCtrl=!0:this.tabCtrl=!1)})),this.$emitter.on("logout-user",(()=>{this.logout(),this.isLogin=!1})),this.isLoading=!1},mounted(){(0,ce.hg)(ue.j2,(e=>{e&&e.emailVerified&&this.getUserInfo(e.uid)})),this.$emitter.on("logout-user",(()=>{this.switchTab(0),this.logout()}))},beforeUnmount(){this.$emitter.off("logout-user",(()=>{this.logout()}))},methods:{switchTab(e){this.tab=e},triggerFileInput(){this.$refs.fileInput.$el.querySelector("input").click()},onImageChange(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{this.member.image=e.target.result},e.readAsDataURL(t)}},removeImage(){this.member.image=null,this.uploadImageDetail=null},updateMember(){this.$refs.profileForm.validate().then((e=>{!1===e.valid?ne.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ce.r7)(ue.j2.currentUser,{displayName:this.member.name}).then((()=>{this.displayName=this.member.name,this.updateUserInfo(ue.j2.currentUser.uid,this.member.address,this.member.phone,this.member.image),ne.A.fire({icon:"success",title:"修改成功"})})).catch((e=>{console.log(`錯誤：${e.message}`),ne.A.fire({icon:"error",title:"修改失敗"})}))}))},async updateUserInfo(e,t,a,l){try{const o=(0,de.H9)(ue.db,"userInfo",e);await(0,de.mZ)(o,{address:t,phoneNumber:a,photoURL:l}),this.$emitter.emit("update-user-login-photo",this.member)}catch(o){console.error("Error updating document: ",o)}},async getUserInfo(e){try{const t=(0,de.rJ)(ue.db,"userInfo"),a=await(0,de.GG)(t);this.userInfo=[],a.forEach((e=>{let t=e.data();t.id=e.id,this.userInfo.push({id:t.id,address:t.address,phoneNumber:t.phoneNumber,photoURL:t.photoURL,orders:t.orders})})),this.userInfo.forEach((t=>{t.id===e&&(this.propsItem=t.orders,this.member.address=t.address,this.member.phone=t.phoneNumber,this.member.image=t.photoURL)}))}catch(t){console.error("Error fetching user info:",t)}},togglePasswordVisibility(){this.showPassword=!this.showPassword},loginSubmit(){this.isLoading=!0,this.isRegistering=!1,this.$refs.loginForm.validate().then((e=>{!1===e.valid?ne.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ce.x9)(ue.j2,this.login.account,this.login.password).then((e=>{this.getAuthState()})).catch((e=>{switch(console.log(`錯誤：${e.message}`),e.message){case"Firebase: Error (auth/user-not-found).":ne.A.fire({icon:"error",title:"帳號不存在"});break;case"Firebase: Error (auth/wrong-password).":ne.A.fire({icon:"error",title:"密碼錯誤"});break;case"Firebase: Error (auth/invalid-credential).":ne.A.fire({icon:"error",title:"登入失敗，帳號或密碼錯誤"});break;default:ne.A.fire({icon:"error",title:"登入失敗"})}}))})),this.isLoading=!1},getAuthState(){(0,ce.hg)(ue.j2,(e=>{e&&(e.emailVerified?(this.login={account:"",password:""},ne.A.fire({icon:"success",title:`${e.displayName}歡迎回來`}),this.isLogin=!0,this.displayName=e.displayName,this.member.name=e.displayName,this.member.email=e.email,this.$emitter.emit("update-user-status")):!1===this.isRegistering&&!1===e.emailVerified&&ne.A.fire({icon:"info",title:"請至信箱驗證帳號"}))}))},async loginWithGoogle(){try{const e=await(0,ce.df)(ue.j2,ue.PW),t=e.user;this.checkDocExistsMixin(t),ne.A.fire({icon:"success",title:`${t.displayName}歡迎回來`})}catch(e){console.error("Error during Google login:",e)}},async checkDocExists(e){try{const t=(0,de.H9)(ue.db,"userInfo",e),a=await(0,de.x7)(t);return!!a.exists()}catch(t){return console.error("Error checking document existence: ",t),!1}},checkDocExistsMixin(e){const t=this.checkDocExists(e.uid);t.then((t=>{!1===t&&(this.member.image=e.photoURL,this.addUserInfoWithCustomId(e.uid,this.member.image),this.$emitter.emit("update-user-login-photo",this.member))})).catch((e=>{console.error("Promise rejected with:",e)}))},async addUserInfoWithCustomId(e,t){try{const a=(0,de.H9)(ue.db,"userInfo",e);await(0,de.BN)(a,{address:"",phoneNumber:"",photoURL:t,orders:[],cartItem:[],favorite:[]})}catch(a){console.error("Error adding document: ",a)}},logout(){this.$swal({title:"確定要登出嗎?",icon:"warning",showCancelButton:!0,scrollbarPadding:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"是",cancelButtonText:"否"}).then((e=>{e.isConfirmed&&(this.isLoading=!0,(0,ce.CI)(ue.j2).then((()=>{this.isLoading=!1,this.isLogin=!1,this.tab=0,this.removeAllCartItem(),ne.A.fire({icon:"success",title:`${this.displayName}貴賓，期待您的再次光臨`}),this.$emitter.emit("update-user-status"),this.member={name:"",email:"",password:"",phone:"",address:"",image:null}})).catch((()=>{ne.A.fire({icon:"error",title:"發生錯誤，請重新整理頁面"})})))}))},removeAllCartItem(){const e="https://vue3-course-api.hexschool.io/api/luxefume-api/carts";this.$http.delete(e).then((()=>{this.$emitter.emit("update-total")})).catch((e=>{console.error(e)}))}}};const Fa=(0,pe.A)(wa,[["render",se],["__scopeId","data-v-3e7aebc7"]]);var xa=Fa},7027:function(e,t,a){a.d(t,{n:function(){return m}});var l=a(641),o=a(5851),r=a(5596),s=a(9823),i=a(9841),n=a(1094),u=a(2636),d=a(4675);const c=(0,n.j)({...(0,o.u)(),...(0,r.pE)()},"VForm"),m=(0,u.RW)()({name:"VForm",props:c(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:o}=t;const n=(0,r.DG)(e),u=(0,i.KR)();function c(e){e.preventDefault(),n.reset()}function m(e){const t=e,a=n.validate();t.then=a.then.bind(a),t.catch=a.catch.bind(a),t.finally=a.finally.bind(a),o("submit",t),t.defaultPrevented||a.then((e=>{let{valid:t}=e;t&&u.value?.submit()})),t.preventDefault()}return(0,d.C)((()=>(0,l.bF)("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:c,onSubmit:m},[a.default?.(n)]))),(0,s.O)(n,u)}})}}]);
//# sourceMappingURL=463.d580a5f1.js.map