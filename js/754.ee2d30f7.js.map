{"version":3,"file":"js/754.ee2d30f7.js","mappings":"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","sources":["webpack://fullstack-ecommerce-pojui/./src/methods/firebase.js","webpack://fullstack-ecommerce-pojui/./src/views/frontend/Cart.vue","webpack://fullstack-ecommerce-pojui/./src/views/frontend/Cart.vue?2afe"],"sourcesContent":["import { initializeApp } from \"firebase/app\"; // 啟用firebase主程式\n// 想要啟用的功能\nimport { getAuth, GoogleAuthProvider, FacebookAuthProvider } from \"firebase/auth\"; // 驗證功能\nimport { getFirestore } from \"firebase/firestore\";\n\n// firebaseConfig 啟用firebase所需的資料\nconst firebaseConfig = {\n  apiKey: process.env.VUE_APP_FIREBASE_API_KEY,\n  authDomain: process.env.VUE_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.VUE_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.VUE_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.VUE_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.VUE_APP_FIREBASE_APP_ID,\n  measurementId: process.env.VUE_APP_FIREBASE_MEASUREMENT_ID,\n};\n\n// 啟用firebase主程式\nconst firebaseApp = initializeApp(firebaseConfig);\n// 啟用驗證功能\nconst auth = getAuth(firebaseApp);\n// 啟用資料庫\nconst db = getFirestore(firebaseApp);\n// Google驗證\nconst googleprovider = new GoogleAuthProvider();\n// Facebook驗證\nconst facebookProvider = new FacebookAuthProvider();\n// 輸出\nexport { firebaseApp, auth, db, googleprovider, facebookProvider };\n","<template>\n  <div>\n    <loading :active.sync=\"isLoading\">\n      <i class=\"loading-box\"></i>\n    </loading>\n    <div class=\"cart-banner\">\n      <h2 class=\"text-center\">購物車</h2>\n    </div>\n    <div class=\"container my-5 m-cart-box\">\n      <div class=\"row align-items-center\">\n        <div\n          class=\"col-lg-8 commodity-box\"\n          :class=\"{ 'col-lg-12': fareTotal <= 0, 'none-commodity': fareTotal <= 0 }\"\n        >\n          <div v-if=\"carts.length > 0\">\n            <table class=\"mt-3\">\n              <thead class=\"font-weight-bold\">\n                <tr>\n                  <th></th>\n                  <th class=\"text-left\">商品</th>\n                  <th class=\"text-center\">數量</th>\n                  <th>單位</th>\n                  <th class=\"text-right\">單價</th>\n                </tr>\n              </thead>\n              <tbody class=\"border-y\">\n                <tr v-for=\"item in carts\" :key=\"item.product_id + 1\">\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger-trash btn-sm\"\n                      @click=\"removeCartItem(item.product_id)\"\n                    >\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </td>\n                  <td>\n                    {{ item.product.title }}\n                  </td>\n                  <td class=\"produce-num-td\">\n                    <div class=\"produce-num-group d-flex\">\n                      <div class=\"num-btnbox\">\n                        <button class=\"btn\" @click=\"quantityUpdata(item.product_id, item.qty - 1)\">\n                          <i class=\"fas fa-minus\"></i>\n                        </button>\n                      </div>\n                      <input\n                        type=\"number\"\n                        class=\"form-control text-center numbox\"\n                        :value=\"item.qty\"\n                        @keyup.enter=\"quantityUpdata(item.product_id, $event.target.value)\"\n                      />\n                      <div class=\"num-btnbox\">\n                        <button class=\"btn\" @click=\"quantityUpdata(item.product_id, item.qty + 1)\">\n                          <i class=\"fas fa-plus\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  </td>\n                  <td><span>/</span> {{ item.product.unit }}</td>\n                  <td class=\"text-right\">\n                    {{ $filters.currency(item.product.price) }}\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td colspan=\"4\">\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-del-all sideline btn-sm float-left my-3\"\n                      @click=\"removeAllCartItem()\"\n                    >\n                      <i class=\"far fa-trash-alt\"> </i>\n                      <span class=\"pl-2\">刪除所有商品</span>\n                    </button>\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n          <div class=\"mb-3 no-shop-box\" v-else>\n            <p class=\"py-5 mt-3\">哎呀！您的購物車是空的，趕快去挑選美品吧！</p>\n            <router-link to=\"/products\" class=\"text-dark\">\n              <i class=\"fas fa-reply mr-2\"></i>\n              繼續購買\n            </router-link>\n          </div>\n        </div>\n        <div class=\"col-lg-4 my-3 card order-price\" :class=\"{ 'd-none': fareTotal <= 0 }\">\n          <div class=\"card-body\">\n            <h3>訂單價格</h3>\n            <div class=\"px-4 mt-3\">\n              <p class=\"d-flex justify-content-between\">\n                <span>小計：</span>\n                <span>{{ $filters.currency(cartTotal) }}</span>\n              </p>\n              <p class=\"d-flex fare justify-content-between\" v-if=\"cartTotal !== 0\">\n                <span>運費：</span>\n                <span v-if=\"cartTotal > 599\"> NT 0</span>\n                <span v-else> NT 60</span>\n              </p>\n              <hr class=\"m-0 my-2\" />\n              <p class=\"text-right promotion\" v-if=\"cartTotal < 599 || cartTotal === 0\">\n                優惠促銷：滿 599 免運\n              </p>\n              <p class=\"text-right free\" v-else>已達免運優惠</p>\n              <p class=\"d-flex justify-content-between\">\n                <span>總計：</span>\n                <span>\n                  {{ $filters.currency(fareTotal) }}\n                </span>\n              </p>\n              <hr class=\"hr-opa\" />\n              <div class=\"mt-3 mb-2 check-box\">\n                <div>\n                  <router-link to=\"/products\" class=\"continue-buy\" v-if=\"carts.length > 0\">\n                    <i class=\"fas fa-reply mr-2\"></i>\n                    繼續購買\n                  </router-link>\n                </div>\n                <div class=\"float-right\">\n                  <router-link\n                    to=\"/order\"\n                    class=\"btn btn-shopping checkout\"\n                    :class=\"{ disabled: fareTotal <= 0 }\"\n                  >\n                    結帳\n                  </router-link>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <section class=\"bg-cart-footer\" v-if=\"!isLoading\">\n      <div class=\"container pt-4\">\n        <h4 class=\"font-weight-bold text-center h4\">香氛蠟燭冷知識</h4>\n        <div class=\"row mt-4 m-footer-cart\">\n          <div class=\"col-lg-4 col-md-6 mb-4\" data-aos=\"zoom-in\">\n            <div\n              class=\"knowledge-img position-relative\"\n              style=\"\n                background-image: url(https://images.unsplash.com/photo-1489176876421-3b720db0fb3d?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);\n              \"\n            >\n              <div class=\"knowledge-box\">\n                <h5 class=\"font-weight-bolder pt-3 pb-2 pl-4\">燃燒溫度</h5>\n                <p class=\"px-4 my-3\">\n                  香氛蠟燭的火焰溫度約為1000°C，因此要小心放置，避免接觸易燃物。\n                </p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-lg-4 col-md-6 mb-4\" data-aos=\"zoom-in\">\n            <div\n              class=\"knowledge-img position-relative\"\n              style=\"\n                background-image: url(https://images.unsplash.com/photo-1602523961358-f9f03dd557db?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);\n              \"\n            >\n              <div class=\"knowledge-box\">\n                <h5 class=\"font-weight-bolder pt-3 pb-2 pl-4\">熔點差異</h5>\n                <p class=\"px-4 my-3\">\n                  蜂蠟的熔點約為62-64°C，石蠟蠟燭的熔點約為46-68°C，大豆蠟的熔點約為49-55°C。\n                </p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-lg-4 col-md-6 mb-4\" data-aos=\"zoom-in\">\n            <div\n              class=\"knowledge-img position-relative\"\n              style=\"\n                background-image: url(https://images.unsplash.com/photo-1495640452828-3df6795cf69b?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);\n              \"\n            >\n              <div class=\"knowledge-box\">\n                <h5 class=\"font-weight-bolder pt-3 pb-2 pl-4\">歷史用途</h5>\n                <p class=\"px-4 my-3\">\n                  香氛蠟燭在歷史上常被用於宗教儀式、醫療用途和貴族宴會，以掩蓋不良氣味或創造特定氛圍。\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Toast from \"@/alert/Toast\";\nimport { auth, db } from \"@/methods/firebase\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { collection, doc, getDoc, updateDoc } from \"firebase/firestore\";\n\nexport default {\n  data() {\n    return {\n      carts: {},\n      cartTotal: 0,\n      fareTotal: 0,\n      isLoading: false,\n      products: {},\n      coupon_code: \"\",\n      userCartItems: [],\n      uid: null,\n    };\n  },\n  created() {\n    this.getAuthState();\n  },\n  watch: {\n    uid(newVal, oldVal) {\n      if (newVal) {\n        // console.log(\"User is logged in with UID:\", newVal);\n      } else {\n        // console.log(\"User is logged out or email is not verified\");\n        // 在這裡處理用戶登出或未驗證的情況\n        this.$router.replace(\"/userlogin\");\n      }\n    },\n  },\n  methods: {\n    getAuthState() {\n      onAuthStateChanged(auth, (user) => {\n        if (user) {\n          if (user.emailVerified) {\n            this.uid = user.uid;\n            this.getCart(user.uid);\n          } else {\n            this.uid = null; // 如果 email 未驗證，清空 uid\n          }\n        } else {\n          this.uid = null; // 如果沒有用戶，清空 uid\n          Toast.fire({\n            icon: \"warning\",\n            title: \"請先登入會員\",\n          });\n          this.$router.replace(\"/userlogin\");\n        }\n      });\n    },\n    async updateUserCartItem(item) {\n      const userRef = collection(db, \"userInfo\");\n      const userDocRef = doc(userRef, this.uid);\n      const docSnap = await getDoc(userDocRef);\n      if (docSnap.exists()) {\n        this.userCartItems = docSnap.data().cartItem;\n        if (item !== undefined) {\n          this.userCartItems = item;\n          await updateDoc(userDocRef, {\n            cartItem: this.userCartItems,\n          });\n        }\n      } else {\n        // doc.data() will be undefined in this case\n        console.log(\"No such document!\");\n      }\n    },\n    getCart(uid) {\n      const url = `${process.env.VUE_APP_CUSTOM_API}cart/${uid}`;\n      this.isLoading = true;\n      setTimeout(() => {\n        this.$http\n          .get(url)\n          .then((response) => {\n            this.carts = response.data.data.carts;\n            if (this.uid !== null) {\n              this.updateUserCartItem(this.carts);\n            }\n            this.updateTotal();\n            this.isLoading = false;\n          })\n          .catch(() => {\n            Toast.fire({\n              title: \"資料讀取失敗，請稍後再試\",\n              icon: \"error\",\n            });\n            this.isLoading = false;\n          });\n      }, 1000);\n    },\n    updateTotal() {\n      let total = 0;\n      this.carts.forEach((item) => {\n        total += item.product.price * item.qty;\n      });\n      this.cartTotal = total;\n      if (total >= 599 || total === 0) {\n        this.fareTotal = total;\n      } else {\n        this.fareTotal = total + 60;\n      }\n    },\n    quantityUpdata(id, num) {\n      this.isLoading = true;\n      num = parseInt(num);\n      setTimeout(() => {\n        if (num >= 1) {\n          const url = `${process.env.VUE_APP_CUSTOM_API}cart/${this.uid}`;\n          const cart = {\n            product_id: id,\n            qty: num,\n          };\n          this.$http.put(url, { data: cart }).then((response) => {\n            this.getCart(this.uid);\n            this.isLoading = false;\n          });\n        } else {\n          Toast.fire({\n            title: \"數量不得小於1\",\n            icon: \"error\",\n          });\n          this.isLoading = false;\n        }\n      }, 1000);\n    },\n    removeCartItem(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_CUSTOM_API}cart/${this.uid}/${id}`;\n      this.$http\n        .delete(url)\n        .then((response) => {\n          this.$emitter.emit(\"update-total\", this.uid); // 更新購物車數量\n          this.getCart(this.uid);\n          this.isLoading = false;\n          Toast.fire({\n            title: \"商品已刪除\",\n            icon: \"success\",\n          });\n        })\n        .catch(() => {\n          this.isLoading = false;\n          Toast.fire({\n            title: \"商品刪除失敗\",\n            icon: \"error\",\n          });\n        });\n    },\n    removeAllCartItem() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_CUSTOM_API}cart/${this.uid}`;\n      this.$http\n        .delete(url)\n        .then(() => {\n          this.$emitter.emit(\"update-total\", this.uid);\n          this.getCart(this.uid);\n          this.cartTotal = 0;\n          this.isLoading = false;\n          Toast.fire({\n            title: \"商品已全部刪除\",\n            icon: \"success\",\n          });\n        })\n        .catch(() => {\n          this.isLoading = false;\n          Toast.fire({\n            title: \"商品刪除失敗\",\n            icon: \"error\",\n          });\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./Cart.vue?vue&type=template&id=1e8e1832\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","initializeApp","auth","getAuth","db","getFirestore","googleprovider","GoogleAuthProvider","FacebookAuthProvider","_createElementVNode","class","key","_hoisted_10","_hoisted_16","_hoisted_21","colspan","_hoisted_26","_hoisted_27","_createStaticVNode","_hoisted_51","_createElementBlock","_createVNode","_component_loading","active","$data","isLoading","default","_withCtx","_hoisted_1","_","_hoisted_2","_hoisted_3","_hoisted_4","_normalizeClass","fareTotal","carts","length","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","item","product_id","type","onClick","$event","$options","removeCartItem","_hoisted_11","_hoisted_9","_toDisplayString","product","title","_hoisted_12","_hoisted_13","_hoisted_14","quantityUpdata","qty","_hoisted_17","_hoisted_15","value","onKeyup","_withKeys","target","_hoisted_18","_hoisted_19","_hoisted_22","_hoisted_20","_hoisted_23","_createTextVNode","unit","_hoisted_24","_ctx","$filters","currency","price","_hoisted_25","_cache","removeAllCartItem","_hoisted_28","_hoisted_29","_hoisted_30","_component_router_link","to","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","cartTotal","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_createCommentVNode","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_createBlock","_hoisted_48","_hoisted_49","disabled","_hoisted_50","_hoisted_52","data","products","coupon_code","userCartItems","uid","created","this","getAuthState","watch","newVal","oldVal","$router","replace","methods","onAuthStateChanged","user","emailVerified","getCart","Toast","fire","icon","updateUserCartItem","userRef","collection","userDocRef","doc","docSnap","getDoc","exists","cartItem","undefined","updateDoc","console","log","url","setTimeout","$http","get","then","response","updateTotal","catch","total","forEach","id","num","parseInt","cart","put","delete","$emitter","emit","__exports__","render"],"sourceRoot":""}